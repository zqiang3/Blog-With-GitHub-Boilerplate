---
layout: post
title: 多活架构分析
slug: live_architecture
date: 2021-07-16 16:24:47
status: publish
author: 君祁
categories:
  - architecture
tags:
  - architecture
excerpt: binary search
---


常见的多活手段，例如同城双活、两地三中心、三地五中心、异地多活架构设计方案并详述了各种方案的优缺点。

双机房距离近，通信质量好，底层储存例如mysql可以采用同步复制，有效保证双机房数据一致性。

[同城双活与异地多活架构分析](https://blog.csdn.net/vivo_tech/article/details/108552279)

## MySQL的半同步
默认情况下，MySQL采用异步复制，主库接收数据后给客户端返回成功，不管备库是否成功接收到数据。这种情况出现数据不一致的可能性就比较大。如果主库宕机，由从库恢复服务就会出现丢失数据的风险。
半同步模式，主库将binlog发给备库，备库写到relay-log后会给主库返回确认，这种情况牺牲部分性能提高了一致性。
完全同步模式，性能最差。