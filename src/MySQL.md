---
layout: post
title: MySQL
slug: mysql
date: 2021-06-16 15:07:17
status: publish
author: 君祁
categories:
  - Maverick 
tags:
  - 数据库
  - MySQL
excerpt: MySQL原理
---

## 聚簇索引与非聚簇索引
聚簇索引(clustered index)：聚簇索引的叶节点存储了整行数据。

非聚簇索引：索引树的叶子节点只存储索引字段和主键的值，不存放整行数据。非聚簇索引也称为二级索引。

聚簇索引与非聚簇索引的区别是：是否存放完整的整行记录。

InnoDB主键使用的是聚簇索引，MyISAM所有的索引（包括主键索引）使用的都是非聚簇索引。

## MySQL的聚簇索引一定是主键吗？
在InnoDB中，聚集索引不一定是主键，但主键一定是聚集索引。如果没有为表定义主键，聚集索引会被设为第一个不为NULL的唯一索引，如果也没有这样的唯一索引，InnoDB 会选择内置 6 字节长的 ROWID 作为隐含的聚集索引。

## InnoDB 事务的四种隔离级别是如何实现的？

## COUNT(*) COUNT(1) COUNT(id) COUNT(普通字段)有区别吗？
先说结论，在高版本的MySQL（5.5及以后），count(1)比count(*)是没有区别的。

COUNT()在统计某个列值的数量时，不会统计NULL。当COUNT内的表达式确定不为NULL时，实际上是在统计所有行数。

如果表只有一个主键索引，没有其他二级索引，那么COUNT(*)与COUNT(1)都是通过主键索引统计行数的。如果该表有二级索引，且二级索引不为NULL，`COUNT(*)`与`COUNT(1)`会用**占用空间最小**的二级索引字段作统计。

补充：MyISAM在统计表的总行数时会很快，原因是MyISAM对于表的行数作了优化，具体做法有一个变量用于存储表的总行数。但是，如果加了WHERE查询条件，该优化将不起作用。
